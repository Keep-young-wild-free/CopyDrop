# 🚀 CopyDrop 빌드 및 실행 가이드

## 📋 필요 조건

### 시스템 요구사항
- **macOS**: 14.0 이상 (현재: macOS 15.6 ✅)
- **Xcode**: 15.0 이상 
- **Swift**: 5.9 이상

### 권한 요구사항
- **클립보드 접근**: 자동으로 요청됨
- **네트워크 통신**: 방화벽 허용 필요
- **키체인 접근**: 암호화 키 저장용

## 🛠️ 빌드 방법

### 방법 1: Xcode에서 실행 (권장)

1. **Xcode로 프로젝트 열기**
   ```bash
   open CopyDrop.xcodeproj
   ```

2. **타겟 설정 확인**
   - Scheme: `CopyDrop`
   - Destination: `My Mac`

3. **빌드 및 실행**
   - `⌘ + R` 또는 Run 버튼 클릭
   - 첫 실행 시 권한 요청에 허용 클릭

### 방법 2: 터미널에서 빌드

1. **Release 빌드 생성**
   ```bash
   xcodebuild -project CopyDrop.xcodeproj \
              -scheme CopyDrop \
              -configuration Release \
              -derivedDataPath ./build \
              build
   ```

2. **앱 실행**
   ```bash
   open ./build/Build/Products/Release/CopyDrop.app
   ```

## ⚡ 최적화 설정

### 성능 최적화

1. **메모리 사용 최적화**
   - 클립보드 히스토리 자동 정리 (7일)
   - 에러 로그 제한 (100개)
   - 자동 재연결 지연 (2초)

2. **네트워크 최적화**
   - 기본 포트: 8787
   - 핑 간격: 30초
   - 최소 동기화 간격: 100ms

3. **보안 최적화**
   - AES-256-GCM 암호화
   - 키체인 안전 저장
   - 자동 내용 필터링

### 디버그 모드 비활성화

Release 빌드에서는 다음이 자동으로 비활성화됩니다:
- 디버그 로그 출력
- 테스트 메뉴 항목
- 개발자 도구

## 🔧 첫 실행 설정

### 1. 권한 허용
앱 첫 실행 시 다음 권한을 허용하세요:
- **클립보드 접근**: "허용" 클릭
- **네트워크 연결**: 방화벽에서 "허용" 클릭

### 2. 암호화 키 설정
- 새 설치: 자동으로 키 생성됨
- 다른 디바이스: QR 코드로 키 공유

### 3. 동기화 모드 선택
- **서버 모드**: 다른 디바이스들이 연결
- **클라이언트 모드**: 기존 서버에 연결

## 🧪 기능 테스트

앱 실행 후 다음 순서로 테스트:

1. **시스템 테스트**
   - 툴바 → "시스템 테스트" 클릭
   - "전체 시스템 테스트 실행" 클릭
   - 모든 테스트 통과 확인

2. **암호화 테스트**
   - 툴바 → "암호화 테스트" 클릭
   - 키 생성/저장/암호화/복호화 확인

3. **클립보드 테스트**
   - 툴바 → "클립보드 테스트" 클릭
   - 자동으로 랜덤 텍스트 생성 및 동기화

## 🌐 네트워크 설정

### 서버 모드 (한 대의 Mac)
1. "동기화 모드"에서 **"서버"** 선택
2. "동기화 시작" 클릭
3. 설정에서 로컬 IP 확인: `192.168.x.x`
4. 다른 디바이스에서 이 IP로 연결

### 클라이언트 모드 (다른 디바이스들)
1. "동기화 모드"에서 **"클라이언트"** 선택
2. 설정 → 서버 URL 입력: `ws://192.168.x.x:8787/ws`
3. "동기화 시작" 클릭

## 🔐 보안 설정

### 키 공유 (디바이스 간)
1. 서버 Mac에서: 설정 → "암호화 키 QR 코드 표시"
2. 클라이언트에서: QR 코드 스캔하여 키 가져오기
3. 또는 Base64 키를 수동으로 복사/붙여넣기

### 내용 필터링
자동으로 다음 내용 차단:
- 패스워드 관련 텍스트
- 신용카드 번호
- 10KB 이상 대용량 텍스트
- 빈 내용

## 🚨 문제 해결

### 연결 안됨
1. 방화벽 설정 확인
2. 같은 WiFi 네트워크 연결 확인
3. IP 주소 정확성 확인
4. 포트 8787 사용 가능 확인

### 동기화 안됨
1. 암호화 키 일치 확인
2. 클립보드 권한 허용 확인
3. 에러 로그 확인 (툴바 → "오류 로그")

### 성능 문제
1. 클립보드 히스토리 정리
2. 에러 로그 정리
3. 앱 재시작

## 📊 모니터링

### 실시간 상태 확인
- 메인 화면 상단의 상태 표시기
- 연결된 디바이스 수
- 마지막 동기화 시간

### 로그 확인
- 툴바 → "오류 로그": 에러 발생 시
- 콘솔 앱: 상세 시스템 로그
- 문서 폴더: `CopyDrop.log` 파일

## 🎯 최적 사용법

1. **한 대를 서버로 설정** (항상 켜둘 Mac)
2. **나머지를 클라이언트로 설정** 
3. **QR 코드로 키 공유**
4. **정기적으로 시스템 테스트 실행**
5. **에러 로그 모니터링**

이제 완벽하게 최적화된 CopyDrop을 사용할 수 있습니다! 🚀
